version: '3.7'

services:

  app:
    stdin_open: true
    container_name: app
    build:
      context: .
      dockerfile: Dockerfile
    volumes:
      # map volumes to hot reload work
      - ./:/app
      - ./node_modules:/app/node_modules
    ports:
      - 3001:3000

  serve:
    stdin_open: true
    container_name: serve
    build:
      context: ../reactnd-contacts-server
      dockerfile: Dockerfile
    volumes:
      # map volumes to hot reload work
      - ../reactnd-contacts-server:/app
      - ../reactnd-contacts-server/node_modules:/app/node_modules
    ports:
      - 3002:3000